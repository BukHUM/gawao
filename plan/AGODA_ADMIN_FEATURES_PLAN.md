# ‡πÅ‡∏ú‡∏ô‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô (Admin Features) ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Agoda Booking Plugin

## üìä ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

### ‚úÖ ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
- Settings Page (API credentials, default settings)
- Test Connection (‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API)
- Rate Limiting Settings
- Cache Settings

### üéØ ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç)

---

## üî• Phase 1: ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ (High Priority)

### 1.1 Dashboard/Overview Page
**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡πÅ‡∏™‡∏î‡∏á‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

**‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:**
- [ ] **API Status Widget**
  - ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ API (Connected/Disconnected)
  - ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏µ‡∏¢‡∏Å API ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ
  - ‡πÅ‡∏™‡∏î‡∏á Rate Limit usage (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô)
  
- [ ] **Quick Stats**
  - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Search ‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ/‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏ô‡∏µ‡πâ/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ô‡∏µ‡πâ)
  - ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô Hotels ‡∏ó‡∏µ‡πà‡∏û‡∏ö (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢)
  - Cache Hit Rate
  - API Response Time (‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢)

- [ ] **Quick Actions**
  - ‡∏õ‡∏∏‡πà‡∏° Test Connection
  - ‡∏õ‡∏∏‡πà‡∏° Clear Cache
  - ‡∏õ‡∏∏‡πà‡∏° View Logs

**Menu Structure:**
```
Agoda Booking (Main Menu)
‚îú‚îÄ‚îÄ Dashboard (Overview) ‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
‚îú‚îÄ‚îÄ Settings (‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô)
‚îú‚îÄ‚îÄ Hotel Search (Preview) ‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
‚îú‚îÄ‚îÄ Cache Management ‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
‚îî‚îÄ‚îÄ API Logs ‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà
```

---

### 1.2 Hotel Search Preview (Admin)
**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°‡πÉ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á

**‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:**
- [ ] **Search Form** (‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô frontend ‡πÅ‡∏ï‡πà‡πÉ‡∏ô admin)
  - City selection (dropdown ‡∏´‡∏£‡∏∑‡∏≠ autocomplete)
  - Check-in/Check-out date picker
  - Adults/Children input
  - Filters (price, rating, discount)
  - Sort options

- [ ] **Results Preview**
  - ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö table/cards
  - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: Hotel Name, Price, Rating, Image, Landing URL
  - ‡∏õ‡∏∏‡πà‡∏° "Copy Landing URL" ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÇ‡∏£‡∏á‡πÅ‡∏£‡∏°
  - ‡∏õ‡∏∏‡πà‡∏° "View Details" (modal ‡∏´‡∏£‡∏∑‡∏≠ expand)

- [ ] **Test Different Scenarios**
  - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö City Search
  - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Hotel List Search
  - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Filters
  - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Error cases

**Use Cases:**
- ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏≥‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ Landing URL ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á
- ‡∏î‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏Å‡πà‡∏≠‡∏ô‡πÅ‡∏™‡∏î‡∏á‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

---

### 1.3 Cache Management
**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ cache ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û

**‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:**
- [ ] **Cache Overview**
  - ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô cache entries
  - ‡πÅ‡∏™‡∏î‡∏á cache size (‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏õ‡πÑ‡∏î‡πâ)
  - ‡πÅ‡∏™‡∏î‡∏á cache hit/miss statistics

- [ ] **Cache Operations**
  - ‡∏õ‡∏∏‡πà‡∏° "Clear All Cache"
  - ‡∏õ‡∏∏‡πà‡∏° "Clear Expired Cache"
  - ‡∏õ‡∏∏‡πà‡∏° "Clear Cache by Pattern" (‡πÄ‡∏ä‡πà‡∏ô clear cache ‡∏Ç‡∏≠‡∏á city ID 9395)

- [ ] **Cache Settings**
  - Cache duration (‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô Settings)
  - Enable/Disable cache
  - Cache statistics

- [ ] **Cache Preview** (Optional)
  - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ cache entries (paginated)
  - ‡πÅ‡∏™‡∏î‡∏á expiration time
  - ‡∏õ‡∏∏‡πà‡∏° "View Cache Content" (debug)

---

### 1.4 API Logs Viewer
**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏î‡∏π logs ‡∏Ç‡∏≠‡∏á API calls ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö debugging

**‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:**
- [ ] **Log List**
  - ‡πÅ‡∏™‡∏î‡∏á logs ‡πÅ‡∏ö‡∏ö table (paginated)
  - Filter: Date range, Log level (ERROR/WARNING/INFO/DEBUG)
  - Search: Search in log messages
  - Sort: By date, by level

- [ ] **Log Details**
  - ‡πÅ‡∏™‡∏î‡∏á full log entry
  - Request details (endpoint, parameters, headers - mask sensitive data)
  - Response details (status code, response body)
  - Error details (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)

- [ ] **Log Actions**
  - Export logs (CSV/JSON)
  - Clear old logs (older than X days)
  - Download logs

- [ ] **Log Settings**
  - Enable/Disable logging
  - Log level (ERROR/WARNING/INFO/DEBUG)
  - Log retention (days)

---

## üöÄ Phase 2: ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (Medium Priority)

### 2.1 City Management (‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ Content API)
**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ city list ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤

**‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:**
- [ ] **City List**
  - ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ cities (‡∏à‡∏≤‡∏Å Content API Feed 3)
  - Search city by name
  - Filter by country
  - Cache city list locally

- [ ] **City Details**
  - ‡πÅ‡∏™‡∏î‡∏á city information
  - ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô hotels ‡πÉ‡∏ô city
  - ‡πÅ‡∏™‡∏î‡∏á popular hotels

**Note**: ‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ Content API credentials ‡∏Å‡πà‡∏≠‡∏ô

---

### 2.2 Statistics & Analytics
**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

**‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:**
- [ ] **Usage Statistics**
  - Chart: Searches per day/week/month
  - Chart: Popular cities
  - Chart: Popular hotels
  - Chart: Average response time

- [ ] **Performance Metrics**
  - API response time (average, min, max)
  - Cache hit rate
  - Error rate
  - API quota usage

- [ ] **Export Reports**
  - Export statistics (CSV/PDF)
  - Scheduled reports (email)

---

### 2.3 Bulk Operations
**‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå**: ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Å‡∏±‡∏ô

**‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:**
- [ ] **Bulk Hotel Search**
  - Upload hotel ID list (CSV)
  - Search multiple hotels at once
  - Export results

- [ ] **Bulk Cache Clear**
  - Clear cache for multiple cities
  - Clear cache for date range

---

## üí° Phase 3: ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á (Low Priority - Future)

### 3.1 Content API Integration
- [ ] Sync hotel data from Content API
- [ ] Store hotels in database
- [ ] Hotel management interface
- [ ] Hotel details editor

### 3.2 Advanced Settings
- [ ] API endpoint configuration
- [ ] Custom headers
- [ ] Proxy settings
- [ ] Webhook configuration

### 3.3 User Management
- [ ] Multiple API credentials (per user role)
- [ ] API key rotation
- [ ] Access control per feature

---

## üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

### üî• ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏Å‡πà‡∏≠‡∏ô (Phase 1)
1. **Dashboard/Overview** - ‡πÉ‡∏´‡πâ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
2. **Hotel Search Preview** - ‡∏ó‡∏î‡∏™‡∏≠‡∏ö API ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ‡∏à‡∏£‡∏¥‡∏á
3. **Cache Management** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ cache
4. **API Logs Viewer** - Debug ‡πÅ‡∏•‡∏∞ monitor

### ‚ö° ‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏ï‡πà‡∏≠ (Phase 2)
5. City Management (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ Content API)
6. Statistics & Analytics
7. Bulk Operations

### üíé ‡∏ó‡∏≥‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (Phase 3)
8. Content API Integration
9. Advanced Settings
10. User Management

---

## üéØ Implementation Plan

### Step 1: Dashboard Page
- ‡∏™‡∏£‡πâ‡∏≤‡∏á `admin/views/dashboard.php`
- ‡πÄ‡∏û‡∏¥‡πà‡∏° menu item "Dashboard"
- ‡πÅ‡∏™‡∏î‡∏á API status, quick stats, quick actions

### Step 2: Hotel Search Preview
- ‡∏™‡∏£‡πâ‡∏≤‡∏á `admin/views/hotel-search.php`
- ‡∏™‡∏£‡πâ‡∏≤‡∏á `admin/js/hotel-search.js`
- ‡πÉ‡∏ä‡πâ API class ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß
- ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÉ‡∏ô admin

### Step 3: Cache Management
- ‡∏™‡∏£‡πâ‡∏≤‡∏á `admin/views/cache-management.php`
- ‡πÄ‡∏û‡∏¥‡πà‡∏° methods ‡πÉ‡∏ô `Agoda_Cache` class
- ‡πÅ‡∏™‡∏î‡∏á cache statistics

### Step 4: API Logs Viewer
- ‡∏™‡∏£‡πâ‡∏≤‡∏á `admin/views/api-logs.php`
- ‡∏≠‡πà‡∏≤‡∏ô logs ‡∏à‡∏≤‡∏Å `Agoda_Logger`
- ‡πÅ‡∏™‡∏î‡∏á logs ‡πÅ‡∏ö‡∏ö table with filters

---

## üìù Notes

- ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ Security checks (nonce, capability)
- ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ Loading states ‡πÅ‡∏•‡∏∞ Error handling
- UI ‡∏Ñ‡∏ß‡∏£‡∏™‡∏≠‡∏î‡∏Ñ‡∏•‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ö WordPress admin style
- ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ Help text ‡πÅ‡∏•‡∏∞ Tooltips

---

**‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà‡∏Å‡πá‡πÑ‡∏î‡πâ! üöÄ**
